<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<meta name="author" content="Бастрыков Евгений">
<title>Введение в язык программирования Go</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article">
<div id="header">
<h1>Введение в язык программирования Go</h1>
<div class="details">
<span id="author" class="author">Бастрыков Евгений</span><br>
<span id="email" class="email"><a href="mailto:vporoshok@gmail.com">vporoshok@gmail.com</a></span><br>
<span id="revnumber">version 0.1.0,</span>
<span id="revdate">2020-01-31</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_базовый_синтаксис">Базовый синтаксис</a>
<ul class="sectlevel2">
<li><a href="#_hello_world">Hello, World!</a></li>
<li><a href="#_переменные">Переменные</a></li>
<li><a href="#_управление_потоком_выполнения">Управление потоком выполнения</a></li>
<li><a href="#_функции">Функции</a></li>
<li><a href="#_задачи">Задачи</a></li>
</ul>
</li>
<li><a href="#_сложные_типы_данных">Сложные типы данных</a>
<ul class="sectlevel2">
<li><a href="#_структуры">Структуры</a></li>
<li><a href="#_указатели">Указатели</a></li>
<li><a href="#_массивы">Массивы</a></li>
<li><a href="#_срезы">Срезы</a></li>
<li><a href="#_хеш_таблицы">Хеш-таблицы</a></li>
<li><a href="#_каналы">Каналы</a></li>
<li><a href="#_пара_слов_об_оформлении_кода">Пара слов об оформлении кода</a></li>
<li><a href="#_пример_сортировка_вставками">Пример: сортировка вставками</a></li>
</ul>
</li>
<li><a href="#_тестирование">Тестирование</a>
<ul class="sectlevel2">
<li><a href="#_простой_тест">Простой тест</a></li>
<li><a href="#_бенчмарки">Бенчмарки</a></li>
<li><a href="#_вложенные_тесты">Вложенные тесты</a></li>
<li><a href="#_property_based_тесты">Property-based тесты</a></li>
<li><a href="#_задача_оптимизация_сортировки_вставками_бинарным_поиском">Задача: оптимизация сортировки вставками бинарным поиском</a></li>
</ul>
</li>
<li><a href="#_ооп_в_go">ООП в Go</a>
<ul class="sectlevel2">
<li><a href="#_методы">Методы</a></li>
<li><a href="#_наследование">Наследование</a></li>
<li><a href="#_интерфейсы_и_полиморфизм">Интерфейсы и полиморфизм</a></li>
</ul>
</li>
<li><a href="#_пакеты_и_модули">Пакеты и модули</a>
<ul class="sectlevel2">
<li><a href="#_публичные_и_приватные_сущности">Публичные и приватные сущности</a></li>
<li><a href="#_циклические_зависимости">Циклические зависимости</a></li>
<li><a href="#_модули">Модули</a></li>
<li><a href="#_соглашения">Соглашения</a></li>
<li><a href="#_задача_развязать_циклические_зависимости">Задача: развязать циклические зависимости</a></li>
<li><a href="#_стандартные_и_экспериментальные_пакеты">Стандартные и экспериментальные пакеты</a></li>
</ul>
</li>
<li><a href="#_конкурентное_программирование">Конкурентное программирование</a>
<ul class="sectlevel2">
<li><a href="#_go_рутины">Go-рутины</a></li>
<li><a href="#_конкурентный_доступ_к_памяти">Конкурентный доступ к памяти</a></li>
<li><a href="#_csp_communicating_sequential_processes">CSP (Communicating sequential processes)</a></li>
<li><a href="#_ожидание_завершения">Ожидание завершения</a></li>
<li><a href="#_прерывание_пула_go_рутин">Прерывание пула go-рутин</a></li>
</ul>
</li>
<li><a href="#_дополнительно">Дополнительно</a>
<ul class="sectlevel2">
<li><a href="#_обработка_ошибок">Обработка ошибок</a></li>
<li><a href="#_потоки_reader_и_writer">Потоки (reader и writer)</a></li>
<li><a href="#_рефлексия">Рефлексия</a></li>
<li><a href="#_различные_подходы_к_тестированию">Различные подходы к тестированию</a></li>
<li><a href="#_генерация_кода">Генерация кода</a></li>
<li><a href="#_makefile_для_go_проектов">Makefile для Go-проектов</a></li>
<li><a href="#_линтеры_и_другие_инструменты">Линтеры и другие инструменты</a></li>
<li><a href="#_особые_комментарии">Особые комментарии</a></li>
<li><a href="#_сборка_мусора">Сборка мусора</a></li>
</ul>
</li>
<li><a href="#_литература_и_ссылки">Литература и ссылки</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>В курсе рассматриваются базовые концепции языка Go, а также основы конкурентного программирования. Язык Go прост в изучении и при этом имеет широкие возможности для оптимизации программ, написанных на нём. В курсе также рассматриваются вопросы, не относящиеся напрямую к изучению языка, но касающиеся применения этого языка в работе или домашних проектах: соглашения по организации кода, версионирование модулей, тестирование кода и многое другое. Также курс содержит указания на материалы для факультативного изучения с более продвинутыми темами, такими как различные подходы к обработке ошибок, рефлексия, генерация кода.</p>
</div>
<div class="paragraph">
<p>Для работы с курсом вам понадобится установленный компилятор языка Go, который можно установить, воспользовавшись инструкциями на официальном сайте <a href="https://golang.org/" class="bare">https://golang.org/</a>. Также необходимо умение пользоваться командной строкой. Данный учебный материал выложен в открытом доступе под лицензией <a href="https://github.com/vporoshok/go-introduction/blob/master/LICENSE">MIT</a>. Исходный код находится по адресу <a href="https://github.com/vporoshok/go-introduction" class="bare">https://github.com/vporoshok/go-introduction</a>, версия для чтения — <a href="https://vporoshok.me/go-introduction/" class="bare">https://vporoshok.me/go-introduction/</a>. Если вы нашли ошибку, опечатку или неточность, откройте задачу или Pull Request в репозитории или свяжитесь со мной с помощью электронной почты <a href="mailto:vporoshok@gmail.com">vporoshok@gmail.com</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_базовый_синтаксис">Базовый синтаксис</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Начнём с избитой фразы: «Go является статически компилируемым в машинный код языком с сильной статической типизацией». А теперь давайте по порядку разбираться, что же всё это означает. Если вам и так всё понятно, смело переходите параграфу <a href="#_hello_world">Hello, World!</a>.</p>
</div>
<div class="paragraph">
<p>Вообще компьютер умеет работать только с так называемым машинным кодом, то есть инструкциями для центрального процессора, закодированных в понятные этому процессору коды. При этом одна инструкция языка, например, <code>print("Hello, World")</code> разворачивается в несколько инструкций для процессора. Программа, на каком бы языке она ни была написана в итоге должна превратиться в инструкции, понятные процессору. Но пути этого превращения различны. Языки могут быть <em>компилируемые</em> и <em>интерпретируемые</em>. У компилируемых языков этап превращения исходного кода в инструкции процессора, называемый <em>компиляцией</em>, отделён от этапа исполнения этих инструкций. В интерпретируемых языках это преобразование делается непосредственно перед исполнением. Стоит отметить, что в Go есть сокращённая форма для компиляции и запуска: <code>go run main.go</code>, выглядящая со стороны как запуск интерпретатора.</p>
</div>
<div class="paragraph">
<p>С другой стороны даже процесс компиляции может быть разделён на различные этапы. Так есть языки с <em>виртуальными машинами</em>, такие как Java, Erlang, JavaScript и многие другие. Программы, написанные на этих языках компилируются в инструкции виртуального процессора, который эмулируется соответствующей виртуальной машиной, которая на своём уровне преобразует эти инструкции в понятные физическому процессору. То есть вводится промежуточное представление программы, не зависящее от архитектуры конечного компьютера. С другой стороны промежуточное представление программы может быть и без виртуальной машины, например, многие языки используют промежуточное LLVM-представление.</p>
</div>
<div class="paragraph">
<p>В случае интерпретируемых языков для запуска необходим интерпретатор и все зависимости. Артефакты же компиляции могут быть <em>динамическими</em> или <em>статическими</em>. Статический исполняемый файл содержит все свои зависимости в себе и не требует установки дополнительных пакетов или библиотек на компьютер, где будет исполняться. С другой стороны динамические ссылки в исполняемом файле дают большую гибкость в настройке уже во время исполнения, позволяя подменять части программы динамически подключаемыми библиотеками.</p>
</div>
<div class="paragraph">
<p>Осталась последняя часть фразы: <em>сильная статическая типизация</em>. В любом языке программирования есть типы, как бы от вас это не скрывалось его синтаксисом, при этом указание типов никак не связано с тем является ли система типов языка сильной или слабой, статической или динамической. <em>Сильной</em> системой типов (иногда её также называют строгой) делает ограничение на взаимодействие между типами, например, нельзя сложить строку и число, а в Go нельзя умножить целое число на дробное. Однако, можно выполнить приведение типа:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span> <span class="tok-kt">int</span> <span class="tok-p">=</span> <span class="tok-mi">12</span>
<span class="tok-kd">var</span> <span class="tok-nx">y</span> <span class="tok-kt">float64</span> <span class="tok-p">=</span> <span class="tok-mf">2.2</span>

<span class="tok-kd">var</span> <span class="tok-nx">res</span> <span class="tok-kt">float64</span> <span class="tok-p">=</span> <span class="tok-nb">float64</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">)</span> <span class="tok-o">+</span> <span class="tok-nx">y</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Также как и с компиляцией, преобразование типов операндов производится в любом языке, но в слабо типизированных языках есть набор правил, по которым компилятор или интерпретатор может выполнить часть преобразований без явных инструкций со стороны программиста. Несмотря на то, что это похоже на то, как мы думаем, ведь написанное на бумаге «426» мы без труда интерпретируем и как строку и как число, хоть целое, хоть вещественное, часто такие неявные правила приводят к трудно обнаружимым ошибкам ошибкам.</p>
</div>
<div class="paragraph">
<p><em>Динамическая</em> и <em>статическая</em> типизация также различается ограничениями, так при статической типизации тип приписывается переменной один раз и не может быть изменён. Например, следующий код допустим в Python (сильная динамическая типизация), но не допустим в Go:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="python"><span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;foo&quot;</span>
<span class="tok-n">x</span> <span class="tok-o">=</span> <span class="tok-mi">5</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Все приведённые выше развилки имеют достоинства и недостатки с обоих сторон. Нельзя сказать, что компилируемые языки лучше или хуже интерпретируемых. Для некоторых задач что-то больше подходит, что-то меньше. Из своего опыта могу лишь сказать, что в долгосрочной перспективе компиляция и строгая статическая типизация помогают уберечься от глупых ошибок, хоть по началу и требуют больше времени для написания кода.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Пара слов о рантайме</div>
<div class="paragraph">
<p>Стоит заметить также, что Go имеет так называемый рантайм (runtime), функциональность, которая добавляется в любую программу при компиляции. Поэтому даже просто hello world в скомпилированном виде имеет размер почти 2 МБ (1968 КБ для версии 1.12.10 linux/amd64). Для чего же нужен этот дополнительный багаж?</p>
</div>
<div class="paragraph">
<p>Во-первых, в рантайм встроен сборщик мусора, освобождающий память, от неиспользуемых переменных. Это значительно облегчает написание кода, в сравнении с низкоуровневыми языками, такими как Си и C++. разработчик не должен сам следить за использованием памяти, вызывая вручную примитивы типа <code>malloc</code> и <code>mfree</code>, хотя для оптимизации высоконагруженных мест Go позволяет переходить к ручному управлению памятью.</p>
</div>
<div class="paragraph">
<p>Во-вторых, рантайм отвечает также за переключение между go-рутинами, позволяя оптимально распределять ресурсы системы под выполняемые задачи. Более подробно про go-рутины и конкурентную модель выполнения Go вы можете прочитать в <a href="#_конкурентное_программирование">соответствующей главе</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hello_world">Hello, World!</h3>
<div class="paragraph">
<p>Продолжим следовать избитым клише и первой программой будет «Привет, Мир!». Создайте файл с именем <code>main.go</code> со следующим содержимым:</p>
</div>
<div class="listingblock">
<div class="title">01_hello_world/main.go</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6
7</div></td><td class="code"><span></span><span class="tok-kn">package</span> <span class="tok-nx">main</span>

<span class="tok-kn">import</span> <span class="tok-s">&quot;fmt&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello, World!&quot;</span><span class="tok-p">)</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь, если выполнить в командной строке (в директории с файлом <code>main.go</code>) команду</p>
</div>
<div class="listingblock">
<div class="content">
<pre>go run main.go</pre>
</div>
</div>
<div class="paragraph">
<p>вы должны увидеть вывод нашей программы:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Hello, World!</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Все примеры, используемые в данном курсе, можно найти в директории examples в репозитории проекта <a href="https://github.com/vporoshok/go-introduction" class="bare">https://github.com/vporoshok/go-introduction</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Давайте разбираться с тем, что происходит в этой короткой программе. Первая не закомментированная строка любого go-файла должна задавать имя пакета, которому этот файл принадлежит. Более подробно о пакетах мы поговорим соответствующей <a href="#_пакеты_и_модули">части</a>, пока же упомянем лишь следующее:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Пакетом является директория, то есть все файлы, расположенные в одной директории (за исключением тестов), должны принадлежать одному пакету. Таким образом не нужно явно подключать файл, находящийся рядом, как в том же Python или NodeJS.</p>
</li>
<li>
<p>Внутри пакета доступны все объявления. То есть нельзя в двух соседних файлах объявлять функции, типы или константы с одинаковыми именами.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Также как в языке Си, исполняемая программа должна содержать функцию <code>main</code>, с которой и начинается исполнение программы. Инструкции за пределами функций, за исключением объявления глобальных переменных, запрещены. Но есть одно ограничение: функция <code>main</code> должна располагаться в пакете <code>main</code>. При этом хорошим тоном считается держать весь код этого пакета в одном файле, так чтобы было удобнее запускать и компилировать программу. На первых порах мы будем оперировать только такими файлами-пакетами, позже мы научимся разбивать код на пакеты и библиотеки.</p>
</div>
<div class="paragraph">
<p>В строке 3 подключается стандартный пакет <code>fmt</code>. Этот пакет содержит функции по работе с вводом/выводом и другие вспомогательные функции. В данном случае в 6-й строке мы используем функцию <code>Println</code> из этого пакета, позволяющую вывести на экран текст.</p>
</div>
</div>
<div class="sect2">
<h3 id="_переменные">Переменные</h3>
<div class="paragraph">
<p>Переменные можно объявлять следующим способом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span> <span class="tok-kt">int</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Это создаст переменную с именем <code>x</code> типа <code>int</code> (то есть целое знаковое число). Эту строку можно прочитать как: «пусть <code>x</code> — переменная типа <code>int</code>». Если необходимо объявить несколько переменных, то можно сгруппировать определения с помощью скобок:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-p">(</span>
    <span class="tok-nx">x</span> <span class="tok-kt">int</span>
    <span class="tok-nx">s</span> <span class="tok-kt">string</span>
<span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В случае, когда необходимо определить несколько переменных одного типа, то их можно сгруппировать следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">y</span><span class="tok-p">,</span> <span class="tok-nx">z</span> <span class="tok-kt">int</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Переменные будут сразу же инициализирована пустыми значением, соответствующими их типам (в данном случае 0). Можно задать другое значение для инициализации:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span> <span class="tok-kt">int</span> <span class="tok-p">=</span> <span class="tok-mi">17</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Эта строка будет аналогична строкам:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span> <span class="tok-kt">int</span>
<span class="tok-nx">x</span> <span class="tok-p">=</span> <span class="tok-mi">17</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Более того в данном случае компилятор может сам определить тип по константе справа, так что запись можно сократить до</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span> <span class="tok-p">=</span> <span class="tok-mi">17</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для таких случаев в Go предусмотренна короткая запись, эквивалентная написанной выше:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">x</span> <span class="tok-o">:=</span> <span class="tok-mi">17</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Операция <code>:=</code> объявляет и инициализирует переменную слева от себя значением правой части. В Go запрещено дважды объявлять переменную, поэтому последующие присвоения необходимо делать с помощью оператора <code>=</code>.</p>
</div>
<div class="paragraph">
<p>Также как обычное присвоение <code>=</code> операция объявления может сопоставлять кортежи:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">y</span><span class="tok-p">,</span> <span class="tok-nx">s</span> <span class="tok-o">:=</span> <span class="tok-mi">17</span><span class="tok-p">,</span> <span class="tok-mf">19.5</span><span class="tok-p">,</span> <span class="tok-s">&quot;hello&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В результате будут объявлены три переменные</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>x</code> типа <code>int</code> со значением 17;</p>
</li>
<li>
<p><code>y</code> типа <code>float64</code> со значением 19.5;</p>
</li>
<li>
<p><code>s</code> типа <code>string</code> со значением "hello";</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Особенностью такого объявления является то, что в левой части могут быть уже объявленные переменные (кроме первой):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">s</span> <span class="tok-kt">string</span>
<span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">y</span><span class="tok-p">,</span> <span class="tok-nx">s</span> <span class="tok-o">:=</span> <span class="tok-mi">17</span><span class="tok-p">,</span> <span class="tok-mf">19.5</span><span class="tok-p">,</span> <span class="tok-s">&quot;hello&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В данном случае переменные <code>x</code> и <code>y</code> будут объявлены во второй строке, а переменной <code>s</code> просто будет присвоено значение, то есть этот код эквивалентен следующему:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">s</span> <span class="tok-kt">string</span>
<span class="tok-nx">x</span> <span class="tok-o">:=</span> <span class="tok-mi">17</span>
<span class="tok-nx">y</span> <span class="tok-o">:=</span> <span class="tok-mf">19.5</span>
<span class="tok-nx">s</span> <span class="tok-p">=</span> <span class="tok-s">&quot;hello&quot;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_скалярные_типы_данных">Скалярные типы данных</h4>
<div class="paragraph">
<p>Будем называть тип данных <em>скалярным</em>, если значение этого типа нельзя модифицировать, можно лишь присвоить новое значение. То есть мы не можем изменить число, но можем присвоить переменной, содержащей число новое значение. Понятнее это определение станет в <a href="#_сложные_типы_данных">следующей части</a>. Пока же перечислим базовые скалярные типы данных:</p>
</div>
<div class="paragraph">
<p>Числа <code>int8</code>, <code>int16</code>, <code>int32</code>, <code>int64</code>, <code>uint8</code>, <code>unit16</code>, <code>uint32</code>, <code>uint64</code>, <code>float32</code>, <code>float64</code>. Как видно все типы имеют в названии размер, занимаемой памяти в битах. Для всех чисел пустое значение — 0. Также любой числовой тип можно привести к любому другому числовому типу, использовав тип как функцию:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span> <span class="tok-kt">int32</span>
<span class="tok-nx">y</span> <span class="tok-o">:=</span> <span class="tok-mf">19.5</span>
<span class="tok-nx">x</span> <span class="tok-p">=</span> <span class="tok-nb">int32</span><span class="tok-p">(</span><span class="tok-nx">y</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>С числами можно производить следующие бинарные арифметические операции: сложение (<code>+</code>), вычитание (<code>-</code>), умножение (<code>*</code>), деление (<code>/</code>), а для целых чисел также доступна операция деления по модулю (<code>%</code>). Кроме того для знаковых типов можно инвертировать знак с помощью приписывания к числу слева знака <code>-</code>. Для всех бинарных операций есть краткая форма записи в случае, если результат необходимо присвоить переменной, являющейся первым операндом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">x</span> <span class="tok-o">+=</span> <span class="tok-mi">2</span> <span class="tok-c1">// эквивалентно x = x + 2</span>
<span class="tok-nx">x</span> <span class="tok-o">%=</span> <span class="tok-mi">3</span> <span class="tok-c1">// эквивалентно x = x % 3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Также существуют операции инкрементирования и декрементирования:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">x</span><span class="tok-o">++</span> <span class="tok-c1">// эквивалентно x += 1</span>
<span class="tok-nx">x</span><span class="tok-o">--</span> <span class="tok-c1">// эквивалентно x -= 1</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Операция присваивания в Go не имеет собственного результата, поэтому нельзя использовать присваивание как часть другой инструкции. Это же относится и к сокращённым формам бинарных операций.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Есть также типы алиасы к числовым типам. Например, тип <code>byte</code> является тем же типом <code>int8</code>, а <code>rune</code> — <code>int32</code>. Но есть и менее предсказуемые типы <code>int</code> и <code>uint</code>, являющиеся алиасами к типам <code>int32</code> и <code>uint32</code> или <code>int64</code> и <code>uint64</code> соответственно в зависимости от битности операционной системы, на которой выполняется программа.</p>
</div>
<div class="paragraph">
<p>Булевый тип <code>bool</code> может принимать значение <code>true</code> или <code>false</code>, последнее является пустым значением для этого типа. Для булевых переменных и констант доступны следующие операции: инверсия (<code>!</code>), логическое <strong>и</strong> (<code>&amp;&amp;</code>) и логическое <strong>или</strong> (<code>||</code>).</p>
</div>
<div class="paragraph">
<p>И, наконец, скалярным типом в Go является строка (тип <code>string</code>). Вообще говоря строка представляет из себя срез (<code>slice</code>), о которых мы будем говорить позже. Но компилятор не позволяет модифицировать отдельные символы строки, так что она подходит под определение скалярного типа. Пустым значением для переменных типа строка является пустая строка. Для объявления строковых констант можно использовать либо двойные кавычки (<code>"</code>), либо обратные кавычки (<code>`</code>), при этом в первых можно использовать специальные символы, такие как <code>\n</code>, <code>\t</code> и так далее, а в обратных кавычках можно использовать непосредственно переносы строк. То есть следующие две константы равны:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">s1</span> <span class="tok-o">:=</span> <span class="tok-s">&quot;foo\nbar&quot;</span>
<span class="tok-nx">s2</span> <span class="tok-o">:=</span> <span class="tok-s">`foo</span>
<span class="tok-s">bar`</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Строки можно складывать (конкатенировать), используя операцию <code>+</code>. А также можно использовать <a href="#_срезы">синтаксис срезов</a> для получения подстроки:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello, World!&quot;</span><span class="tok-p">[</span><span class="tok-mi">3</span><span class="tok-p">:</span><span class="tok-mi">5</span><span class="tok-p">]</span> <span class="tok-o">+</span> <span class="tok-s">&quot;l&quot;</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_константы">Константы</h4>
<div class="paragraph">
<p>Для всех скалярных типов можно также определить константу с помощью ключевого слова <code>const</code>. Объявление аналогично определению с ключевым словом <code>var</code>, но полученный объект нельзя использовать в левой части оператора присваивания. Также во время объявления констант доступно ключевое слово <code>iota</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">const</span> <span class="tok-p">(</span>
    <span class="tok-nx">Foo</span> <span class="tok-p">=</span> <span class="tok-kc">iota</span>
    <span class="tok-nx">Bar</span>
    <span class="tok-nx">Baz</span>
    <span class="tok-nx">Qux</span>
<span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В результате будет объявлены следующие константы типа <code>int</code>: <code>Foo</code> равная 0, <code>Bar</code> равная 1, <code>Baz</code> равная 2 и <code>Qux</code> равная 3. При этом <code>iota</code> в рамках одного блока определений будет принимать значения от 0 до максимума типа <code>int</code>, увеличиваясь для каждого следующего определения. Для констант можно задать тип, отличный от <code>int</code>, а с <code>iota</code> можно составить выражение, допустимое в определении констант:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">const</span> <span class="tok-p">(</span>
    <span class="tok-nx">Foo</span> <span class="tok-kt">uint32</span> <span class="tok-p">=</span> <span class="tok-kc">iota</span> <span class="tok-o">*</span> <span class="tok-kc">iota</span>
    <span class="tok-nx">Bar</span>
    <span class="tok-nx">Baz</span>
    <span class="tok-nx">Qux</span>
<span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Такой встроенный итератор можно использовать как некоторую замену отсутствующему в языке <code>enum</code>'у, но в придачу к <code>iota</code> понадобится <a href="#_генерация_кода">Генерация кода</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_область_видимости">Область видимости</h4>
<div class="paragraph">
<p>Областью видимости переменной называется область кода, где доступно значение этой переменной. Всегда есть глобальная область видимости пакета, туда попадают константы, функции, типы и переменные, объявленные вне функций. Глобальную переменную можно объявить только с использованием ключевого слова <code>var</code>. То есть можно написать</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">x</span> <span class="tok-p">=</span> <span class="tok-mi">17</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>но нельзя использовать оператор <code>:=</code>.</p>
</div>
<div class="paragraph">
<p>Более узкую область видимости определяют функции. В теле функции доступны переменные, объявленные в глобальной области, а также переменные, объявленные в этом же теле функции выше. При этом локальные переменные могут перекрывать внешние, то есть следующий код</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">s</span> <span class="tok-p">=</span> <span class="tok-s">&quot;foo&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-kd">var</span> <span class="tok-nx">s</span> <span class="tok-p">=</span> <span class="tok-s">&quot;bar&quot;</span>
    <span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">s</span><span class="tok-p">)</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Выведет строку <code>"bar"</code>, при этом значение глобальной переменной останется прежним. Некоторые особенности области видимости функций подробнее будут рассмотрены в <a href="#_функции">соответствующем параграфе</a>.</p>
</div>
<div class="paragraph">
<p>Помимо функций, вложенные области видимости задают все конструкции, управляющие потоком выполнения.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_управление_потоком_выполнения">Управление потоком выполнения</h3>
<div class="paragraph">
<p>Для управления потоком выполнения в Go предусмотренны следующие конструкции:</p>
</div>
<div class="sect3">
<h4 id="_условия">Условия</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">if</span> <span class="tok-p">&lt;</span><span class="tok-nx">condition</span> <span class="tok-mi">1</span><span class="tok-p">&gt;</span> <span class="tok-p">{</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">1</span><span class="tok-p">&gt;</span>
<span class="tok-p">}</span> <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-p">&lt;</span><span class="tok-nx">condition</span> <span class="tok-mi">2</span><span class="tok-p">&gt;</span> <span class="tok-p">{</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">2</span><span class="tok-p">&gt;</span>
<span class="tok-p">}</span> <span class="tok-k">else</span> <span class="tok-p">{</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">3</span><span class="tok-p">&gt;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Если выполнено условие <code>&lt;condition 1&gt;</code>, то будут выполнены инструкции, перечисленные в <code>&lt;body 1&gt;</code>, если не выполнено условие <code>&lt;condition 1&gt;</code>, но выполнено условие <code>&lt;condition 2&gt;</code>, то будут выполнены инструкции из <code>&lt;body 2&gt;</code>, наконец, если ни одно условие не выполнено, то будут выполнены инструкции из блока <code>else</code> (<code>&lt;body 3&gt;</code>). Блоков <code>else if</code> может быть сколько угодно от 0 и до бесконечности. Блок <code>else</code> может быть пропущен.</p>
</div>
<div class="paragraph">
<p>В качестве условий можгут быть использованы любые выражения, результатом которых имеет тип <code>bool</code>, например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">if</span> <span class="tok-nx">x</span> <span class="tok-p">&lt;</span> <span class="tok-mi">0</span> <span class="tok-o">||</span> <span class="tok-nx">x</span> <span class="tok-p">&gt;</span> <span class="tok-mi">100</span> <span class="tok-p">{</span>
    <span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Неверно задано значение x&quot;</span><span class="tok-p">)</span>
<span class="tok-p">}</span> <span class="tok-k">else</span> <span class="tok-k">if</span> <span class="tok-nx">x</span> <span class="tok-o">==</span> <span class="tok-mi">0</span> <span class="tok-p">{</span>
    <span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;x равен нулю&quot;</span><span class="tok-p">)</span>
<span class="tok-p">}</span> <span class="tok-k">else</span> <span class="tok-p">{</span>
    <span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;x равен&quot;</span><span class="tok-p">,</span> <span class="tok-nx">x</span><span class="tok-p">)</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Вообще некоторые считают плохим тоном использование ключевого слова <code>else</code>, предпочитая делать ранний выход из функции. Это не особо относится к изучению синтаксиса языка, но может качественно сказаться на читаемости вашего кода. В любом случае рекомендуем прочитать книгу «Чистый код»<a href="#cc">[cc]</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>В Go есть особая форма конструкции <code>if</code>, позволяющая выполнить инструкцию прямо внутри условия. Для примера рассмотрим следующую задачу: дана хеш таблица <code>m</code>, необходимо проверить наличие в ней ключа, если ключ есть, то вернуть значение по этому ключу, иначе вернуть <code>defaultValue</code> (аналог метода <code>get</code> словарей в Python). Подробнее о хеш-таблицах мы поговорим в <a href="#_хеш_таблицы">соответствующем разделе</a>, здесь отметим лишь то, что при получении значения по ключу из хеш-таблицы можно использовать синтаксис</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">val</span><span class="tok-p">,</span> <span class="tok-nx">ok</span> <span class="tok-o">:=</span> <span class="tok-nx">m</span><span class="tok-p">[</span><span class="tok-nx">key</span><span class="tok-p">]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Тогда, если ключ есть в хеш-таблице, то <code>val</code> будет присвоено значение, хранящееся по этому ключу, а в <code>ok</code> будет записано <code>true</code>. Если же ключ не найден, то <code>val</code> будет присвоено пустое значение, соответствующее типу значений хеш-таблицы, а в <code>ok</code> будет записано <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Таким образом, задачу можно решить следующим способом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">val</span><span class="tok-p">,</span> <span class="tok-nx">ok</span> <span class="tok-o">:=</span> <span class="tok-nx">m</span><span class="tok-p">[</span><span class="tok-nx">key</span><span class="tok-p">]</span>
<span class="tok-k">if</span> <span class="tok-nx">ok</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">val</span>
<span class="tok-p">}</span>
<span class="tok-k">return</span> <span class="tok-nx">defaultValue</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Но в Go можно объединить первые две строки:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">if</span> <span class="tok-nx">val</span><span class="tok-p">,</span> <span class="tok-nx">ok</span> <span class="tok-o">:=</span> <span class="tok-nx">m</span><span class="tok-p">[</span><span class="tok-nx">key</span><span class="tok-p">];</span> <span class="tok-nx">ok</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">val</span>
<span class="tok-p">}</span>
<span class="tok-k">return</span> <span class="tok-nx">defaultValue</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Это особенно удобно потому, что во втором случае область видимости переменных <code>val</code> и <code>ok</code> будет ограничена условием, в первом же случае они оказываются объявлены за пределами условия.</p>
</div>
</div>
<div class="sect3">
<h4 id="_switch">Switch</h4>
<div class="paragraph">
<p>Для сопоставления значения выражения возможным значениям можно использовать оператор <code>switch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">switch</span> <span class="tok-p">&lt;</span><span class="tok-nx">expression</span><span class="tok-p">&gt;</span> <span class="tok-p">{</span>
<span class="tok-k">case</span> <span class="tok-p">&lt;</span><span class="tok-nx">value</span> <span class="tok-mi">1</span><span class="tok-p">&gt;:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">1</span><span class="tok-p">&gt;</span>
<span class="tok-k">case</span> <span class="tok-p">&lt;</span><span class="tok-nx">value</span> <span class="tok-mi">2</span><span class="tok-p">&gt;:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">2</span><span class="tok-p">&gt;</span>
<span class="tok-k">default</span><span class="tok-p">:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">3</span><span class="tok-p">&gt;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Если значение выражение совпадёт с одним из значений, будет выполнен соответствующий блок. При этом, если выражение совпадёт с несколькими значениями, будет выполнен только блок, соответствующий первому совпадению. Если значение выражения не совпадёт ни с одним из перечисленных значений, то будет выполнен блок <code>default</code>, которого может не быть.</p>
</div>
<div class="paragraph">
<p>Знакомые с такими языками как Си или JavaScript могут удивиться отсутствию ключевых слов <code>break</code> в конце блоков. В Go поведение по умолчанию противоположно поведению этих языков. По умолчанию выполняется только один блок. Если необходимо выполнить также и следующий блок, необходимо использовать ключевое слово <code>fallthrough</code>. Например,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">switch</span> <span class="tok-nx">command</span> <span class="tok-p">{</span>
<span class="tok-k">case</span> <span class="tok-s">&quot;save and continue&quot;</span><span class="tok-p">:</span>
    <span class="tok-nx">save</span><span class="tok-p">()</span>
    <span class="tok-k">fallthrough</span>
<span class="tok-k">case</span> <span class="tok-s">&quot;continue&quot;</span><span class="tok-p">:</span>
    <span class="tok-nx">next</span><span class="tok-p">()</span>
<span class="tok-k">default</span><span class="tok-p">:</span>
    <span class="tok-nx">save</span><span class="tok-p">()</span>
    <span class="tok-nx">stop</span><span class="tok-p">()</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В данном примере, если значение переменной <code>command</code> равно строке <code>"continue"</code>, то будет выполнена только функция <code>next</code>, если значение равно <code>"save and continue"</code>, то будет выполнена функция <code>save</code>, после чего будет выполнена следующая ветка, то есть <code>"continue"</code>, состоящая из вызова функции <code>next</code>. При любой другой команде будет выполнен блок <code>default</code>.</p>
</div>
<div class="paragraph">
<p>Если для нескольких значений необходимо выполнить одну и ту же последовательность инструкций, то можно записать это следующим образом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">switch</span> <span class="tok-nx">command</span> <span class="tok-p">{</span>
<span class="tok-k">case</span> <span class="tok-s">&quot;save and continue&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;save and next&quot;</span><span class="tok-p">:</span>
    <span class="tok-nx">save</span><span class="tok-p">()</span>
    <span class="tok-k">fallthrough</span>
<span class="tok-k">case</span> <span class="tok-s">&quot;continue&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;next&quot;</span><span class="tok-p">:</span>
    <span class="tok-nx">next</span><span class="tok-p">()</span>
<span class="tok-k">default</span><span class="tok-p">:</span>
    <span class="tok-nx">save</span><span class="tok-p">()</span>
    <span class="tok-nx">stop</span><span class="tok-p">()</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Часто конструкцию из множественных блоков <code>else if</code> переписывают в виде:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">switch</span> <span class="tok-kc">true</span> <span class="tok-p">{</span>
<span class="tok-k">case</span> <span class="tok-p">&lt;</span><span class="tok-nx">condition</span> <span class="tok-mi">1</span><span class="tok-p">&gt;:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">1</span><span class="tok-p">&gt;</span>
<span class="tok-k">case</span> <span class="tok-p">&lt;</span><span class="tok-nx">condition</span> <span class="tok-mi">2</span><span class="tok-p">&gt;:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">2</span><span class="tok-p">&gt;</span>
<span class="tok-k">default</span><span class="tok-p">:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">3</span><span class="tok-p">&gt;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В Go в такой конструкции можно опустить выражение <code>true</code> вообще:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">switch</span> <span class="tok-p">{</span>
<span class="tok-k">case</span> <span class="tok-p">&lt;</span><span class="tok-nx">condition</span> <span class="tok-mi">1</span><span class="tok-p">&gt;:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">1</span><span class="tok-p">&gt;</span>
<span class="tok-k">case</span> <span class="tok-p">&lt;</span><span class="tok-nx">condition</span> <span class="tok-mi">2</span><span class="tok-p">&gt;:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">2</span><span class="tok-p">&gt;</span>
<span class="tok-k">default</span><span class="tok-p">:</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">body</span> <span class="tok-mi">3</span><span class="tok-p">&gt;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
В отличии от других языков в Go использование констуркции <code>switch</code> не является анти-паттерном, однако длинных и, тем более, повторяющихся <code>switch</code>-ей стоит избегать, используя полиморфизм или хеш-таблицы.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_циклы">Циклы</h4>
<div class="paragraph">
<p>Одной из «фишек» Go является минимизация ключевых слов языка. Именно поэтому все циклы в нём определяются одним ключевым словом <code>for</code>. Но имеются следующие виды циклов:</p>
</div>
<div class="paragraph">
<p><strong>Классический Си-подобный</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">for</span> <span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-nx">i</span> <span class="tok-p">&lt;</span> <span class="tok-mi">10</span><span class="tok-p">;</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
    <span class="tok-c1">// body</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Здесь перед входом в цикл выполняется первая инструкция (<code>i := 0</code>), перед каждой итерацией цикла, в том числе и первой проверяется условие (<code>i &lt; 10</code>) и, если условие выполнено, то выполняется тело цикла, после чего выполняется вторая инструкция (<code>i++</code>), если же условие не выполнено, то цикл завершается и программа переходит к следующим инструкциям. Инструкции и условия могут быть более сложными, например</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">for</span> <span class="tok-nx">i</span><span class="tok-p">,</span> <span class="tok-nx">a</span><span class="tok-p">,</span> <span class="tok-nx">b</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-nx">i</span> <span class="tok-p">&lt;</span> <span class="tok-mi">100</span><span class="tok-p">;</span> <span class="tok-nx">i</span><span class="tok-p">,</span> <span class="tok-nx">a</span><span class="tok-p">,</span> <span class="tok-nx">b</span> <span class="tok-p">=</span> <span class="tok-nx">i</span><span class="tok-o">+</span><span class="tok-mi">1</span><span class="tok-p">,</span> <span class="tok-nx">b</span><span class="tok-p">,</span> <span class="tok-nx">a</span><span class="tok-o">+</span><span class="tok-nx">b</span> <span class="tok-p">{</span>
    <span class="tok-c1">// body</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Аналог цикла <code>while</code></strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">for</span> <span class="tok-nx">x</span> <span class="tok-p">&lt;</span> <span class="tok-nx">y</span> <span class="tok-p">{</span>
    <span class="tok-c1">// body</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>По сути этот цикл можно написать как частный случай предыдущего, где обе инструкции пустые:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">for</span> <span class="tok-p">;</span> <span class="tok-nx">x</span> <span class="tok-p">&lt;</span> <span class="tok-nx">y</span><span class="tok-p">;</span> <span class="tok-p">{</span>
    <span class="tok-c1">// body</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Но Go повзоляет в этом случае не писать лишние точки с запятыми.</p>
</div>
<div class="paragraph">
<p><strong>Итерирование</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">for</span> <span class="tok-nx">i</span><span class="tok-p">,</span> <span class="tok-nx">x</span> <span class="tok-o">:=</span> <span class="tok-k">range</span> <span class="tok-nx">m</span> <span class="tok-p">{</span>
    <span class="tok-c1">// body</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Это особый вид цикла, где после ключевого слова <code>range</code> может стоять выражение, результатом которого является строка, массив, срез, хеш-таблица или канал. Принцип действия для строк, массивов и срезов похож: для всех элементов этих объектов будет выполнено тело цикла, а переменная <code>i</code> будет принимать последовательно значения от 0 до длинны объекта без единицы, а <code>x</code> — значения хранящиеся в данном объекте по индексу <code>i</code>. Более подробно действие циклов такого типа будет рассмотренно в разделах, посвящённых <a href="#_срезы">срезам</a>, <a href="#_хеш_таблицы">хеш-таблицам</a> и <a href="#_каналы">каналам</a>.</p>
</div>
<div class="paragraph">
<p><strong>Бесконечный цикл</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">for</span> <span class="tok-p">{</span>
    <span class="tok-c1">// body</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Наконец, цикл с пустым условием аналогичен циклу с всегда истинным условием. Для выхода из такого цикла необходимо воспользоваться ключевыми словами <code>break</code> или <code>return</code>.</p>
</div>
<div class="paragraph">
<p>Также как и в других языках, в Go есть ключевые слова <code>continue</code> и <code>break</code>. Первое позволяет преждевременно завершить текущую итерцию цикла и перейти к следующей, например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">sumOfPrimes</span> <span class="tok-o">:=</span> <span class="tok-mi">0</span>
<span class="tok-k">for</span> <span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-nx">i</span> <span class="tok-p">&lt;</span> <span class="tok-mi">100</span><span class="tok-p">;</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
    <span class="tok-k">if</span> <span class="tok-p">!</span><span class="tok-nx">isPrime</span><span class="tok-p">(</span><span class="tok-nx">i</span><span class="tok-p">)</span> <span class="tok-p">{</span>
        <span class="tok-k">continue</span>
    <span class="tok-p">}</span>
    <span class="tok-nx">sumOfPrimes</span> <span class="tok-o">+=</span> <span class="tok-nx">i</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>С помощью ключевого слова <code>break</code> можно прекратить выполнение цикла. Однако, надо помнить, что это ключевое слово используется не только для прерывания цикла, но и для прерывания рассмотренной конструкции <code>switch</code> и конструкции из следующей главы <code>select</code>. Например, следующий код выведет все числа от 0 до 9:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-k">for</span> <span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span><span class="tok-p">;</span> <span class="tok-nx">i</span> <span class="tok-p">&lt;</span> <span class="tok-mi">10</span><span class="tok-p">;</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
    <span class="tok-k">switch</span> <span class="tok-nx">i</span> <span class="tok-p">{</span>
    <span class="tok-k">case</span> <span class="tok-mi">5</span><span class="tok-p">:</span>
        <span class="tok-k">break</span>
    <span class="tok-p">}</span>
    <span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">i</span><span class="tok-p">)</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_функции">Функции</h3>
<div class="paragraph">
<p>Функции являются первым инструментом декомпозиции кода, разделения задачи на самодостаточные изолированные части. Подробнее о том как применять функции для решения задач обсудим в <a href="#_пример_вычисление_квадратного_корня_методом_ньютона">практической части этого раздела</a>, а пока сосредоточимся на синтаксисе. Определение функции всегда начинается с ключевого слова <code>func</code>, после чего возможно несколько вариантов:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>именованная функция уровня пакета;</p>
</li>
<li>
<p>анонимная функция;</p>
</li>
<li>
<p>метод (в данном разделе мы пропустим этот вариант и вернёмся к нему в <a href="#_ооп_в_go">разделе, посвящённом ООП и методам</a>);</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Определение именованной функции уровня пакета мы с вами уже встречали:</p>
</div>
<div class="listingblock">
<div class="title">01_hello_world/main.go</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6
7</div></td><td class="code"><span></span><span class="tok-kn">package</span> <span class="tok-nx">main</span>

<span class="tok-kn">import</span> <span class="tok-s">&quot;fmt&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello, World!&quot;</span><span class="tok-p">)</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>В данном примере функция не принимает аргументов и ничего не возвращает. Для более полного описания синтаксиса рассмотрим ещё несколько примеров:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-c1">// Вычисление квадрата числа</span>
<span class="tok-kd">func</span> <span class="tok-nx">square</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">float64</span><span class="tok-p">)</span> <span class="tok-kt">float64</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-nx">x</span>
<span class="tok-p">}</span>

<span class="tok-c1">// Сумма чисел</span>
<span class="tok-kd">func</span> <span class="tok-nx">sum</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">y</span> <span class="tok-kt">float64</span><span class="tok-p">)</span> <span class="tok-kt">float64</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">+</span> <span class="tok-nx">y</span>
<span class="tok-p">}</span>

<span class="tok-c1">// Выравнивание строки по правому краю по заданной длинне</span>
<span class="tok-kd">func</span> <span class="tok-nx">leftPad</span><span class="tok-p">(</span><span class="tok-nx">s</span> <span class="tok-kt">string</span><span class="tok-p">,</span> <span class="tok-nx">n</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">string</span> <span class="tok-p">{</span>
    <span class="tok-nx">pad</span> <span class="tok-o">:=</span> <span class="tok-s">&quot;&quot;</span>
    <span class="tok-k">for</span> <span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-nb">len</span><span class="tok-p">(</span><span class="tok-nx">s</span><span class="tok-p">);</span> <span class="tok-nx">i</span> <span class="tok-p">&lt;</span> <span class="tok-nx">n</span><span class="tok-p">;</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
        <span class="tok-nx">pad</span> <span class="tok-o">+=</span> <span class="tok-s">&quot; &quot;</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-nx">pad</span> <span class="tok-o">+</span> <span class="tok-nx">s</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В общем виде определение функции можно описать так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-p">&lt;</span><span class="tok-nx">имя</span><span class="tok-p">&gt;(&lt;</span><span class="tok-nx">описание</span> <span class="tok-nx">аргументов</span><span class="tok-p">&gt;)</span> <span class="tok-p">&lt;</span><span class="tok-nx">описание</span> <span class="tok-nx">результата</span><span class="tok-p">&gt;</span> <span class="tok-p">{</span>
    <span class="tok-p">&lt;</span><span class="tok-nx">тело</span><span class="tok-p">&gt;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Перечисление аргументов функции очень похоже на определение переменных с помощью ключевого слова <code>var</code>, но в отличии от определения переменных, аргументам нельзя присваивать значение для инициализации, потому что при вызове функции необходимо передать все аргументы.</p>
</div>
<div class="sect3">
<h4 id="_кортеж_результатов">Кортеж результатов</h4>
<div class="paragraph">
<p>Функции могут возвращать не одно значение, а кортеж. В качестве примера возьмём функцию, которая принимает два аргумента и возвращает их в обратном порядке:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">swap</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">y</span> <span class="tok-kt">float64</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-kt">float64</span><span class="tok-p">,</span> <span class="tok-kt">float64</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">y</span><span class="tok-p">,</span> <span class="tok-nx">x</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Типы результатов могут быть разными, а также можно именовать результаты, превращая их в объявление переменных. Это особенно удобно, когда не очевидно назначение результатов. При этом если использовать ключевое слово <code>return</code> без дополнительных аргументов, то будет возвращёны значения именованных результатов:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">stripLeftSpaces</span><span class="tok-p">(</span><span class="tok-nx">s</span> <span class="tok-kt">string</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nx">result</span> <span class="tok-kt">string</span><span class="tok-p">,</span> <span class="tok-nx">trimmedSpaceCount</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-nx">result</span> <span class="tok-o">:=</span> <span class="tok-nx">s</span>
    <span class="tok-k">for</span> <span class="tok-nx">result</span> <span class="tok-o">!=</span> <span class="tok-s">&quot;&quot;</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-nx">result</span><span class="tok-p">[</span><span class="tok-mi">0</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span> <span class="tok-p">{</span>
        <span class="tok-nx">result</span> <span class="tok-p">=</span> <span class="tok-nx">result</span><span class="tok-p">[</span><span class="tok-mi">1</span><span class="tok-p">:]</span>
        <span class="tok-nx">trimmedSpaceCount</span><span class="tok-o">++</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>При этом совсем не обязательно использовать для возврата именно именованные результаты:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">stripLeftSpaces</span><span class="tok-p">(</span><span class="tok-nx">s</span> <span class="tok-kt">string</span><span class="tok-p">)</span> <span class="tok-p">(</span><span class="tok-nx">result</span> <span class="tok-kt">string</span><span class="tok-p">,</span> <span class="tok-nx">trimmedSpaceCount</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-k">for</span> <span class="tok-p">;</span> <span class="tok-nx">trimmedSpaceCount</span> <span class="tok-p">&lt;</span> <span class="tok-nb">len</span><span class="tok-p">(</span><span class="tok-nx">s</span><span class="tok-p">)</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-nx">s</span><span class="tok-p">[</span><span class="tok-nx">trimmedSpaceCount</span><span class="tok-p">]</span> <span class="tok-o">==</span> <span class="tok-sc">&#39; &#39;</span><span class="tok-p">;</span> <span class="tok-nx">trimmedSpaceCount</span><span class="tok-o">++</span> <span class="tok-p">{</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-nx">s</span><span class="tok-p">[</span><span class="tok-nx">trimmedSpaceCount</span><span class="tok-p">:],</span> <span class="tok-nx">trimmedSpaceCount</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Присваивание в никуда</div>
<div class="paragraph">
<p>Бывает ситуации, когда из кортежа результатов, возвращаемых функцией, требуются не все. Тогда можно присвоить часть этого кортежа в никуда, точнее в специальную переменную <code>_</code>, куда можно записать всё что угодно, но ничего нельзя прочитать. Например, если нам необходимо убрать пробелы из начала строки, но не важно сколько их там было, можно написать:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">trimmedString</span><span class="tok-p">,</span> <span class="tok-nx">_</span> <span class="tok-o">:=</span> <span class="tok-nx">stripLeftSpaces</span><span class="tok-p">(</span><span class="tok-nx">s</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Подстановку <code>_</code> можно использовать не только для пропуска результатов, но в любом определении или присваивании переменных, в том числе и в аргументах функции.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_анонимные_функции">Анонимные функции</h4>
<div class="paragraph">
<p>В Go функции являются такими же данными, как переменные или константы. То есть функции можно передавать как аргументы в другие функции. Например, напишем функцию, находящую минимальное натуральное число (не включая 0), для которого выполнена некоторая проверка <code>check</code>, которая является функцией, принимающей целое число и возвращающей булево значение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-nx">check</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span><span class="tok-p">)</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
    <span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span>
    <span class="tok-k">for</span> <span class="tok-p">;</span> <span class="tok-p">!</span><span class="tok-nx">check</span><span class="tok-p">(</span><span class="tok-nx">i</span><span class="tok-p">);</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-nx">i</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Функция <code>findMinimal</code> принимает один аргумент <code>check</code> с типом <code>func(x int) bool</code>. Под этот тип подойдут любые функции, принимающие один аргумент с типом <code>int</code> и возвращающие булево значение. Конечно, что то, как аргумент этой функции будет называться нем не важно. Поэтому имя аргумента можно опустить, сократив определение типа до <code>func(int) bool</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Теперь можно использовать эту функцию в комбинации с различными функциями проверки:</p>
</div>
<div class="listingblock">
<div class="title">02_find_minimal/main.go</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28</div></td><td class="code"><span></span><span class="tok-kn">package</span> <span class="tok-nx">main</span>

<span class="tok-kn">import</span> <span class="tok-s">&quot;fmt&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-nx">check</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span><span class="tok-p">)</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
	<span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span>
	<span class="tok-k">for</span> <span class="tok-p">;</span> <span class="tok-p">!</span><span class="tok-nx">check</span><span class="tok-p">(</span><span class="tok-nx">i</span><span class="tok-p">);</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
	<span class="tok-p">}</span>
	<span class="tok-k">return</span> <span class="tok-nx">i</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">greatThan100</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
	<span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-p">&gt;</span> <span class="tok-mi">100</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">dividedBy11</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
	<span class="tok-k">return</span> <span class="tok-nx">x</span><span class="tok-o">%</span><span class="tok-mi">11</span> <span class="tok-o">==</span> <span class="tok-mi">0</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">dividedBy11And13</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
	<span class="tok-k">return</span> <span class="tok-nx">x</span><span class="tok-o">%</span><span class="tok-mi">11</span> <span class="tok-o">==</span> <span class="tok-mi">0</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-nx">x</span><span class="tok-o">%</span><span class="tok-mi">13</span> <span class="tok-o">==</span> <span class="tok-mi">0</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Минимальное число, больше 100:&quot;</span><span class="tok-p">,</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-nx">greatThan100</span><span class="tok-p">))</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Минимальное число, делимое на 11:&quot;</span><span class="tok-p">,</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-nx">dividedBy11</span><span class="tok-p">))</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Минимальное число, делимое на 11 и 13:&quot;</span><span class="tok-p">,</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-nx">dividedBy11And13</span><span class="tok-p">))</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Но иногда не хочется объявлять функции в глобальном пространстве имён. Тогда можно воспользоваться анонимными функциями, функциями без имени:</p>
</div>
<div class="listingblock">
<div class="title">03_find_minimal_anonymous/main.go</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</div></td><td class="code"><span></span><span class="tok-kn">package</span> <span class="tok-nx">main</span>

<span class="tok-kn">import</span> <span class="tok-s">&quot;fmt&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-nx">check</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span><span class="tok-p">)</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
	<span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span>
	<span class="tok-k">for</span> <span class="tok-p">;</span> <span class="tok-p">!</span><span class="tok-nx">check</span><span class="tok-p">(</span><span class="tok-nx">i</span><span class="tok-p">);</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
	<span class="tok-p">}</span>
	<span class="tok-k">return</span> <span class="tok-nx">i</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Минимальное число, больше 100:&quot;</span><span class="tok-p">,</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
		<span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-p">&gt;</span> <span class="tok-mi">100</span>
	<span class="tok-p">}))</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Минимальное число, делимое на 11:&quot;</span><span class="tok-p">,</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
		<span class="tok-k">return</span> <span class="tok-nx">x</span><span class="tok-o">%</span><span class="tok-mi">11</span> <span class="tok-o">==</span> <span class="tok-mi">0</span>
	<span class="tok-p">}))</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Минимальное число, делимое на 11 и 13:&quot;</span><span class="tok-p">,</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
		<span class="tok-k">return</span> <span class="tok-nx">x</span><span class="tok-o">%</span><span class="tok-mi">11</span> <span class="tok-o">==</span> <span class="tok-mi">0</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-nx">x</span><span class="tok-o">%</span><span class="tok-mi">13</span> <span class="tok-o">==</span> <span class="tok-mi">0</span>
	<span class="tok-p">}))</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Мы просто объявили функции в месте передачи их как аргументов, не давая им имена. Анонимную функцию можно присвоить переменной и даже вернуть как результат другой функции.</p>
</div>
</div>
<div class="sect3">
<h4 id="_замыкания">Замыкания</h4>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">dividedBy</span><span class="tok-p">(</span><span class="tok-nx">d</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">bool</span> <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">%</span> <span class="tok-nx">d</span> <span class="tok-o">==</span> <span class="tok-mi">0</span>
    <span class="tok-p">}</span>
<span class="tok-p">}</span>

<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-s">&quot;Минимальное число, делимое на 11:&quot;</span><span class="tok-p">,</span> <span class="tok-nx">findMinimal</span><span class="tok-p">(</span><span class="tok-nx">dividedBy</span><span class="tok-p">(</span><span class="tok-mi">11</span><span class="tok-p">)))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Получившаяся функция также называется <em>замыканием</em>, потому что ссылается на область видимости функции, которая её порождает (аргумент <code>d</code>). При этом в замыкании можно как читать, так и изменять контекст порождающей функции. С помощью замыканий можно реализовывать различные полезные паттерны проектирования. Например, с помощью замыкания можно создать итератор (объект возвращающий по запросу следующее значение из некоторой последовательности последовательности). Для примера напишем генератор чисел Фибоначчи:</p>
</div>
<div class="listingblock">
<div class="title">04_fibonacci/main.go</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</div></td><td class="code"><span></span><span class="tok-kn">package</span> <span class="tok-nx">main</span>

<span class="tok-kn">import</span> <span class="tok-s">&quot;fmt&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">fibonacci</span><span class="tok-p">()</span> <span class="tok-kd">func</span><span class="tok-p">()</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
	<span class="tok-nx">a</span><span class="tok-p">,</span> <span class="tok-nx">b</span> <span class="tok-o">:=</span> <span class="tok-mi">0</span><span class="tok-p">,</span> <span class="tok-mi">1</span>
	<span class="tok-k">return</span> <span class="tok-kd">func</span><span class="tok-p">()</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
		<span class="tok-nx">a</span><span class="tok-p">,</span> <span class="tok-nx">b</span> <span class="tok-p">=</span> <span class="tok-nx">b</span><span class="tok-p">,</span> <span class="tok-nx">a</span><span class="tok-o">+</span><span class="tok-nx">b</span>
		<span class="tok-k">return</span> <span class="tok-nx">a</span>
	<span class="tok-p">}</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
	<span class="tok-nx">iter</span> <span class="tok-o">:=</span> <span class="tok-nx">fibonacci</span><span class="tok-p">()</span>
	<span class="tok-k">for</span> <span class="tok-nx">i</span> <span class="tok-o">:=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-nx">i</span> <span class="tok-p">&lt;</span> <span class="tok-mi">10</span><span class="tok-p">;</span> <span class="tok-nx">i</span><span class="tok-o">++</span> <span class="tok-p">{</span>
		<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">iter</span><span class="tok-p">())</span>
	<span class="tok-p">}</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_рекурсия">Рекурсия</h4>
<div class="paragraph">
<p>Некоторые задачи требуют рекурсивного вызова функции. Например, вычисление факториала числа:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">factorial</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-nx">factorial</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Никогда не используйте приведённый выше способ вычисления факториала ни в одном языке. Используйте возможности стандартной библиотеки или используйте нерекурсивный вариант.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Несколько сложнее написать рекурсивную анонимную функцию, ведь для того, чтобы её вызвать необходимо знать её имя.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">factorial</span> <span class="tok-o">:=</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-nx">factorial</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Такой вариант не скомпилируется, потому что компилятор сначала разбирает определение функции, а уже только после этого определение переменной <code>factorial</code>, то есть на момент разбора определения функции переменная <code>factorial</code> ещё не объявлена и мы не можем её использовать. Это можно обойти, разделив определение и присвоение:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">factorial</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">int</span>
<span class="tok-nx">factorial</span> <span class="tok-p">=</span> <span class="tok-kd">func</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-nx">factorial</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">-</span> <span class="tok-mi">1</span><span class="tok-p">)</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Теперь к моменту разбора тела функции переменная <code>factorial</code> уже объявлена и её можно использовать.</p>
</div>
</div>
<div class="sect3">
<h4 id="_функции_с_переменным_количеством_аргументов">Функции с переменным количеством аргументов</h4>
<div class="paragraph">
<p>Иногда возникает необходимость определить функцию, которая может принимать переменное число аргументов. Например, функция, суммирующая все переданные в неё аргументы. Вообще говоря мы можем передать в такую функцию один аргумент с типом срез (см. <a href="#_срезы">Срезы</a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">sum</span><span class="tok-p">(</span><span class="tok-nx">args</span> <span class="tok-p">[]</span><span class="tok-kt">float64</span><span class="tok-p">)</span> <span class="tok-kt">float64</span> <span class="tok-p">{</span>
    <span class="tok-nx">res</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span>
    <span class="tok-k">for</span> <span class="tok-nx">_</span><span class="tok-p">,</span> <span class="tok-nx">x</span> <span class="tok-o">:=</span> <span class="tok-k">range</span> <span class="tok-nx">args</span> <span class="tok-p">{</span>
        <span class="tok-nx">res</span> <span class="tok-o">+=</span> <span class="tok-nx">x</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-nx">res</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Но теперь, чтобы воспользоваться такой функцией нам будет необходимо в явном виде создавать срез и передавать его в качестве аргумента:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">sum</span><span class="tok-p">([]</span><span class="tok-kt">float64</span><span class="tok-p">{</span><span class="tok-mi">4</span><span class="tok-p">,</span> <span class="tok-mi">5</span><span class="tok-p">}))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>В Go есть синтаксический сахар, позволяющий объявить последний аргумент функции как остаточный (rest):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">sum</span><span class="tok-p">(</span><span class="tok-nx">args</span> <span class="tok-o">...</span><span class="tok-kt">float64</span><span class="tok-p">)</span> <span class="tok-kt">float64</span> <span class="tok-p">{</span>
    <span class="tok-nx">res</span> <span class="tok-o">:=</span> <span class="tok-mi">1</span>
    <span class="tok-k">for</span> <span class="tok-nx">_</span><span class="tok-p">,</span> <span class="tok-nx">x</span> <span class="tok-o">:=</span> <span class="tok-k">range</span> <span class="tok-nx">args</span> <span class="tok-p">{</span>
        <span class="tok-nx">res</span> <span class="tok-o">+=</span> <span class="tok-nx">x</span>
    <span class="tok-p">}</span>
    <span class="tok-k">return</span> <span class="tok-nx">res</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Внутри функции это будет такой же срез, как и был, зато снаружи можно будет передавать аргументы обычным кортежем:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">sum</span><span class="tok-p">(</span><span class="tok-mi">4</span><span class="tok-p">,</span> <span class="tok-mi">5</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Этот синтаксис имеет ряд ограничений, но часто позволяет улучшить публичный интерфейс пакета. Старайтесь не злоупотреблять подобным синтаксисом.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_задачи">Задачи</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Что будет результатом <code>--x</code>? Почему?</p>
</li>
<li>
<p>Предложите минимальное исправление для следующей программы:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kn">package</span> <span class="tok-nx">main</span>

<span class="tok-kn">import</span> <span class="tok-s">&quot;fmt&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">sum</span><span class="tok-p">(</span><span class="tok-nx">x</span><span class="tok-p">,</span> <span class="tok-nx">y</span> <span class="tok-kt">float64</span><span class="tok-p">)</span> <span class="tok-kt">float64</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">+</span> <span class="tok-nx">y</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">square</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-kt">int</span> <span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-nx">x</span> <span class="tok-o">*</span> <span class="tok-nx">x</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">square</span><span class="tok-p">(</span><span class="tok-nx">sum</span><span class="tok-p">(</span><span class="tok-mi">25</span><span class="tok-p">,</span> <span class="tok-mi">9</span><span class="tok-p">)))</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Чему будет равна константа <code>Qux</code> при следующем определении:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">const</span> <span class="tok-p">(</span>
    <span class="tok-nx">Foo</span> <span class="tok-kt">uint32</span> <span class="tok-p">=</span> <span class="tok-kc">iota</span> <span class="tok-o">*</span> <span class="tok-kc">iota</span>
    <span class="tok-nx">Bar</span>
    <span class="tok-nx">Baz</span> <span class="tok-p">=</span> <span class="tok-kc">iota</span> <span class="tok-o">+</span> <span class="tok-mi">2</span>
    <span class="tok-nx">Qux</span>
<span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Напишите генератор квадратов натуральных чисел.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_сложные_типы_данных">Сложные типы данных</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Важной отличительной чертой скалярных типов является то, что при передаче их в качестве аргументов в функцию, на самом деле в функцию попадает копия объекта. Для наглядности рассмотрим пример:</p>
</div>
<div class="listingblock">
<div class="title">05_scalar_args/main.go</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kn">package</span> <span class="tok-nx">main</span>

<span class="tok-kn">import</span> <span class="tok-s">&quot;fmt&quot;</span>

<span class="tok-kd">func</span> <span class="tok-nx">increment</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-p">{</span>
	<span class="tok-nx">x</span><span class="tok-o">++</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
	<span class="tok-nx">n</span> <span class="tok-o">:=</span> <span class="tok-mi">12</span>
	<span class="tok-nx">increment</span><span class="tok-p">(</span><span class="tok-nx">n</span><span class="tok-p">)</span>
	<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">n</span><span class="tok-p">)</span> <span class="tok-c1">// 12</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>По факту переменные <code>n</code> и <code>x</code> будут указывать на разные участки оперативной памяти. В этой части мы рассмотрим типы данных, для которых это не так однозначно.</p>
</div>
<div class="sect2">
<h3 id="_структуры">Структуры</h3>
<div class="paragraph">
<p>Структуры в Go, как и в Си представляют из себя связанный набор переменных. Например, если в программе используется ФИО, будет полезно иметь тройку переменных, отвечающих за фамилию, имя и отчество:структура:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">var</span> <span class="tok-nx">fio</span> <span class="tok-kd">struct</span> <span class="tok-p">{</span>
    <span class="tok-nx">Last</span><span class="tok-p">,</span> <span class="tok-nx">First</span><span class="tok-p">,</span> <span class="tok-nx">Middle</span> <span class="tok-kt">string</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Далее к полям этой структуры можно обращаться через точку:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">fio</span><span class="tok-p">.</span><span class="tok-nx">Last</span> <span class="tok-p">=</span> <span class="tok-s">&quot;Иванов&quot;</span>
<span class="tok-nx">fio</span><span class="tok-p">.</span><span class="tok-nx">First</span> <span class="tok-p">=</span> <span class="tok-s">&quot;Иван&quot;</span>
<span class="tok-nx">fio</span><span class="tok-p">.</span><span class="tok-nx">Middle</span> <span class="tok-p">=</span> <span class="tok-s">&quot;Иванович&quot;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Как видно структура не является скалярным типом в нашем определении, потому что мы можем изменять изолированно часть данных, обращаясь к конкретному полю.</p>
</div>
<div class="paragraph">
<p>Если в нашей программе тройка ФИО встречается не единожды, удобно объявить новый тип данных, описывающий такую структуру:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">type</span> <span class="tok-nx">FIO</span> <span class="tok-kd">struct</span> <span class="tok-p">{</span>
    <span class="tok-nx">Last</span><span class="tok-p">,</span> <span class="tok-nx">First</span><span class="tok-p">,</span> <span class="tok-nx">Middle</span> <span class="tok-kt">string</span>
<span class="tok-p">}</span>

<span class="tok-nx">fio</span> <span class="tok-o">:=</span> <span class="tok-nx">FIO</span><span class="tok-p">{</span>
    <span class="tok-nx">Last</span><span class="tok-p">:</span>   <span class="tok-s">&quot;Иванов&quot;</span><span class="tok-p">,</span>
    <span class="tok-nx">First</span><span class="tok-p">:</span>  <span class="tok-s">&quot;Иван&quot;</span><span class="tok-p">,</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Обратите внимание, что при создании объекта порядок полей может отличаться от порядка в объявлении типа, также могут быть перечисленны не все поля. Но можно не указывать имена полей, в таком случае порядок должен быть полностью совпадать с порядком объявления и пропуски запрещены:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">fio</span> <span class="tok-o">:=</span> <span class="tok-nx">FIO</span><span class="tok-p">{</span><span class="tok-s">&quot;Иванов&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;Иван&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;Иванович&quot;</span><span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Пустая структура</div>
<div class="paragraph">
<p>Иногда в коде, написанном на Go, встречается следующая конструкция:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">type</span> <span class="tok-nx">myType</span> <span class="tok-kd">struct</span><span class="tok-p">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>или</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">m</span> <span class="tok-o">:=</span> <span class="tok-kd">map</span><span class="tok-p">[</span><span class="tok-kt">string</span><span class="tok-p">]</span><span class="tok-kd">struct</span><span class="tok-p">{}{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Переменные такого типа не будут занимать память для данных, но сохранят привязку к типу. Это может пригодиться, например, для построения множеств с помощью <a href="#_хеш_таблицы">хеш-таблиц</a> или как приватный ключ для данных в <a href="#_context">контексте</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Теперь мы также можем передать переменную такого типа в функцию. И в этом случае поведение структуры похоже на поведение скалярных типов, создаётся копия переменной:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">type</span> <span class="tok-nx">Animal</span> <span class="tok-kd">struct</span> <span class="tok-p">{</span>
    <span class="tok-nx">Kind</span> <span class="tok-kt">string</span>
    <span class="tok-nx">Name</span> <span class="tok-kt">string</span>
    <span class="tok-nx">Age</span>  <span class="tok-kt">int</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">incrementAge</span><span class="tok-p">(</span><span class="tok-nx">animal</span> <span class="tok-nx">Animal</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-nx">animal</span><span class="tok-p">.</span><span class="tok-nx">Age</span><span class="tok-o">++</span>
<span class="tok-p">}</span>

<span class="tok-kd">func</span> <span class="tok-nx">main</span><span class="tok-p">()</span> <span class="tok-p">{</span>
    <span class="tok-nx">Jackie</span> <span class="tok-o">:=</span> <span class="tok-nx">Animal</span><span class="tok-p">{</span>
        <span class="tok-nx">Kind</span><span class="tok-p">:</span> <span class="tok-s">&quot;dog&quot;</span><span class="tok-p">,</span>
        <span class="tok-nx">Name</span><span class="tok-p">:</span> <span class="tok-s">&quot;Джеки&quot;</span><span class="tok-p">,</span>
        <span class="tok-nx">Age</span><span class="tok-p">:</span>  <span class="tok-mi">17</span><span class="tok-p">,</span>
    <span class="tok-p">}</span>
    <span class="tok-nx">incrementAge</span><span class="tok-p">(</span><span class="tok-nx">Jackie</span><span class="tok-p">)</span>
    <span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">Jackie</span><span class="tok-p">.</span><span class="tok-nx">Age</span><span class="tok-p">)</span> <span class="tok-c1">// 17</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для изменения данных структуры внутри функции можно воспользоваться указателями.</p>
</div>
</div>
<div class="sect2">
<h3 id="_указатели">Указатели</h3>
<div class="paragraph">
<p>Указатель это адрес данных в памяти. Если мы создадим копию этого адреса, он всё равно будет указывать на ту же область памяти. Таким образом при передаче указателя в качестве аргумента мы не создаём копию данных, копия указателя ссылается на те же данные. В Go существую только типизированные указатели, то есть они указывают на область памяти, где располагаются данные определённого типа. Этим типом может быть любой другой тип (кроме интерфейса, но об этом <a href="#_интерфейсы_и_полиморфизм">позже</a>). Для указания того, что переменная является указателем перед типом добавляется символ <code>*</code>. Например:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">incrementAgeByPointer</span><span class="tok-p">(</span><span class="tok-nx">animal</span> <span class="tok-o">*</span><span class="tok-nx">Animal</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-nx">animal</span><span class="tok-p">.</span><span class="tok-nx">Age</span><span class="tok-o">++</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Обращение к полям структуры не зависит от того, является ли переменная указателем или нет, но для других типов это не так. Например, если у нас есть указатель на число, то для работы с ним как с числом его необходимо разыменовать с помощью того же символа <code>*</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-kd">func</span> <span class="tok-nx">incrementByPointer</span><span class="tok-p">(</span><span class="tok-nx">x</span> <span class="tok-o">*</span><span class="tok-kt">int</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-nx">x</span><span class="tok-p">)</span><span class="tok-o">++</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для того же, чтобы получить указатель на данные необходимо воспользоваться оператором <code>&amp;</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">incrementAgeByPointer</span><span class="tok-p">(</span><span class="tok-o">&amp;</span><span class="tok-nx">Jackie</span><span class="tok-p">)</span>
<span class="tok-nx">fmt</span><span class="tok-p">.</span><span class="tok-nx">Println</span><span class="tok-p">(</span><span class="tok-nx">Jackie</span><span class="tok-p">.</span><span class="tok-nx">Age</span><span class="tok-p">)</span> <span class="tok-c1">// 18</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Также при определении структуры можно вместо данных сразу получить указатель:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">fio</span> <span class="tok-o">:=</span> <span class="tok-o">&amp;</span><span class="tok-nx">FIO</span><span class="tok-p">{</span><span class="tok-s">&quot;Иванов&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;Иван&quot;</span><span class="tok-p">,</span> <span class="tok-s">&quot;Иванович&quot;</span><span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Для других констант это невозможно, так что необходимо создавать переменную и получать указатель именно на неё:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="go"><span class="tok-nx">s</span> <span class="tok-o">:=</span> <span class="tok-s">&quot;some string&quot;</span>
<span class="tok-nx">p</span> <span class="tok-o">:=</span> <span class="tok-o">&amp;</span><span class="tok-nx">s</span></code></pre>
</div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Пара слов о памяти</div>
<div class="paragraph">
<p>Стоит отметить, что указатель далеко не бесплатная переменная. Во-первых, в зависимости от системы он занимает в памяти 4 или 8 байт для 32- и 64-битных систем соответственно. Во-вторых, наличие указателя на определённые данные повышает вероятность того, что память для этих данных будет выделена в куче вместо стека, а соответственно это добавит работы сборщику мусора. Однако для больших структур вероятность выделения памяти в куче и так велика, а дополнительные 8 байт на указатель могут в несколько раз быть меньше памяти, необходимой на копию. Использовать или не использовать указатель сильно зависит от контекста и нет единого правила.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_массивы">Массивы</h3>

</div>
<div class="sect2">
<h3 id="_срезы">Срезы</h3>

</div>
<div class="sect2">
<h3 id="_хеш_таблицы">Хеш-таблицы</h3>

</div>
<div class="sect2">
<h3 id="_каналы">Каналы</h3>

</div>
<div class="sect2">
<h3 id="_пара_слов_об_оформлении_кода">Пара слов об оформлении кода</h3>

</div>
<div class="sect2">
<h3 id="_пример_сортировка_вставками">Пример: сортировка вставками</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_тестирование">Тестирование</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_простой_тест">Простой тест</h3>

</div>
<div class="sect2">
<h3 id="_бенчмарки">Бенчмарки</h3>

</div>
<div class="sect2">
<h3 id="_вложенные_тесты">Вложенные тесты</h3>

</div>
<div class="sect2">
<h3 id="_property_based_тесты">Property-based тесты</h3>

</div>
<div class="sect2">
<h3 id="_задача_оптимизация_сортировки_вставками_бинарным_поиском">Задача: оптимизация сортировки вставками бинарным поиском</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_ооп_в_go">ООП в Go</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_методы">Методы</h3>

</div>
<div class="sect2">
<h3 id="_наследование">Наследование</h3>

</div>
<div class="sect2">
<h3 id="_интерфейсы_и_полиморфизм">Интерфейсы и полиморфизм</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_пакеты_и_модули">Пакеты и модули</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_публичные_и_приватные_сущности">Публичные и приватные сущности</h3>

</div>
<div class="sect2">
<h3 id="_циклические_зависимости">Циклические зависимости</h3>

</div>
<div class="sect2">
<h3 id="_модули">Модули</h3>

</div>
<div class="sect2">
<h3 id="_соглашения">Соглашения</h3>
<div class="paragraph">
<p>internal, vendor, cmd, lib</p>
</div>
</div>
<div class="sect2">
<h3 id="_задача_развязать_циклические_зависимости">Задача: развязать циклические зависимости</h3>

</div>
<div class="sect2">
<h3 id="_стандартные_и_экспериментальные_пакеты">Стандартные и экспериментальные пакеты</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_конкурентное_программирование">Конкурентное программирование</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_go_рутины">Go-рутины</h3>

</div>
<div class="sect2">
<h3 id="_конкурентный_доступ_к_памяти">Конкурентный доступ к памяти</h3>
<div class="paragraph">
<p>atomic, mutex, Map</p>
</div>
</div>
<div class="sect2">
<h3 id="_csp_communicating_sequential_processes">CSP (Communicating sequential processes)</h3>

</div>
<div class="sect2">
<h3 id="_ожидание_завершения">Ожидание завершения</h3>
<div class="paragraph">
<p>WaitGroup, ErrGroup</p>
</div>
</div>
<div class="sect2">
<h3 id="_прерывание_пула_go_рутин">Прерывание пула go-рутин</h3>
<div class="sect3">
<h4 id="_context">Context</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_дополнительно">Дополнительно</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_обработка_ошибок">Обработка ошибок</h3>

</div>
<div class="sect2">
<h3 id="_потоки_reader_и_writer">Потоки (reader и writer)</h3>

</div>
<div class="sect2">
<h3 id="_рефлексия">Рефлексия</h3>

</div>
<div class="sect2">
<h3 id="_различные_подходы_к_тестированию">Различные подходы к тестированию</h3>

</div>
<div class="sect2">
<h3 id="_генерация_кода">Генерация кода</h3>

</div>
<div class="sect2">
<h3 id="_makefile_для_go_проектов">Makefile для Go-проектов</h3>

</div>
<div class="sect2">
<h3 id="_линтеры_и_другие_инструменты">Линтеры и другие инструменты</h3>

</div>
<div class="sect2">
<h3 id="_особые_комментарии">Особые комментарии</h3>

</div>
<div class="sect2">
<h3 id="_сборка_мусора">Сборка мусора</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="_литература_и_ссылки">Литература и ссылки</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a id="cc"></a>[cc] Роберт Мартин. <em>Чистый код. Создание, анализ и рефакторинг.</em>
Питер, 2018.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.1.0<br>
Last updated 2020-02-03 15:25:03 +04
</div>
</div>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.6.0/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script>
</body>
</html>